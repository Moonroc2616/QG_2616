<!DOCTYPE html>
<html>
<body bgcolor="gray">
<meta charset="utf-8">
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script>
    "use strict";
    $(document).ready(function(){
        $("button#login").click(function(){
            var username = $('[name=username]').val();
            var password = $('[name=password]').val();
            $.ajax({
                type: 'post',
                url: '/SFM?method=login',
                async: true,
                data: {
                    username: username,
                    password: password
                },
                success: function(result){
                    alert("登陆成功");
                    window.open("homepage.html","_self");
                },
                error: function(XMLHttpRequest){
                    let msg = XMLHttpRequest.responseText;
                    msg = msg.substring(msg.indexOf("消息"));
                    msg = msg.substring(msg.indexOf(" ")+1,msg.indexOf("</p>"));
                    alert(msg);
                },

                timeout: 3000
            });
        });
    });
</script>
<table>
    <tr>
        <td align="right">
            用户名：
        </td>
        <td>
            <input type="text" size="23" name="username">
        </td>
    </tr>
    <tr>
        <td align="right">
            密码：
        </td>
        <td>
            <input type="password" size="23" name="password">
        </td>
    </tr>
    <tr>
        <td></td>
        <td>
            <button type="button" id="login">登陆</button>
        </td>
    </tr>
    <tr>
        <td></td>
        <td>
            <button type="button" id="visit">以游客身份进入</button>
        </td>
    </tr>
    <tr>
        <td>
            尚无账号？
        </td>
        <td>
            <button type="button" id="toRegister" onclick="javascript:window.open('register.html','_self')">前往注册</button>
        </td>
    </tr>
</table>
<form method="post" action="http://39.98.41.126:31104/files/uploadImg" enctype="multipart/form-data">
    文件：<input type="file" name="file1"><br/>
    <input type="text" name="type">
    <input type="text" name="id">
    <input type="submit" value="提交">
</form>
</body>
</html>

<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta http-equiv="X-UA-Compatible" content="IE=edge">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Login Page</title>-->
<!--</head>-->
<!--<body>-->
<!--<h2>Login Form</h2>-->
<!--<form id="loginForm" action="/SFM" method="get">-->
<!--    <label for="username">Username:</label>-->
<!--    <input type="text" id="username" name="username"><br><br>-->

<!--    <label for="password">Password:</label>-->
<!--    <input type="password" id="password" name="password"><br><br>-->

<!--    <input type="hidden" name="method" value="login">-->

<!--    <button type="submit">Login</button>-->
<!--</form>-->

<!--<script>-->
<!--    document.getElementById("loginForm").addEventListener("submit", function(event) {-->
<!--        event.preventDefault(); // Prevent the form from submitting normally-->

<!--        var username = document.getElementById("username").value;-->
<!--        var password = document.getElementById("password").value;-->

<!--        // Send GET request to Servlet-->
<!--        var xhr = new XMLHttpRequest();-->
<!--        xhr.open("GET", "/SFM?username=" + username + "&password=" + password + "&method=login", true);-->
<!--        xhr.onload = function () {-->
<!--            if (xhr.status === 200) {-->
<!--                alert("Login successful");-->
<!--                window.open('homepage.html', '_self');-->
<!--            } else {-->
<!--                alert("Login failed: " + xhr.responseText);-->
<!--            }-->
<!--        };-->
<!--        xhr.send();-->
<!--    });-->
<!--</script>-->
<!--</body>-->
<!--</html>-->